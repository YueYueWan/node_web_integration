"use strict";(self.webpackChunknode_web_integration=self.webpackChunknode_web_integration||[]).push([[216],{2545:function(e,a,l){l.r(a),l.d(a,{default:function(){return ue}});var t=l(6252),s=l(2262),i=l(3577),o=l(9963),n=l.p+"0d151052625bff96e69d.jpg",r=l.p+"636e60b6ecc465744436.jpg",c=l.p+"3b6dc783caa13b66d29a.jpg",d=l.p+"99c3aa17599eb930d9b4.jpg",u=l.p+"d8d77e8d3df4bd6b64e4.jpg",g=l.p+"0b451e6c081a21e11cfd.jpg",m=l.p+"d373be5974ae31fec11b.jpg",p=l.p+"39223c5bdd80d8606be4.jpg",v=l.p+"e7363b6d2bac02e0ebd3.jpg",h=l.p+"7ef98941006cde53f5ac.jpg",b=l.p+"f77d76a66a9e76a6c524.jpg",f=l.p+"0345de3072f712937c34.jpg",w=l.p+"15bedb8d6527516e7bb7.jpg",j=l.p+"94601fb9c11b076f7661.jpg",_=l.p+"f2cc149651573968a7be.jpg",k=l.p+"8b29a3f8052c6162abc4.jpg",y=l.p+"4961b53edfe49d93e906.jpg",x=l.p+"e7616571795eded9863f.jpeg",U=l.p+"944dab0c7d5b1450f621.jpg",q=l.p+"45fd51e45659aede00e4.jpg";const S=[{url:n},{url:r},{url:c},{url:d},{url:u}],R=[{url:b},{url:f},{url:w},{url:j},{url:_}],H=[{url:g},{url:m},{url:p},{url:v},{url:h}],C=[{url:k},{url:y},{url:x},{url:U},{url:q}];var P=l(4284),A=l(1817);const D=e=>{P.z8.error(e)},M=A.Z.create({baseURL:"http://localhost:3000",timeout:2e4});M.interceptors.request.use((e=>e),(e=>(console.log(e),Promise.reject(e)))),M.interceptors.response.use((e=>{const a=e.data;return console.log("res==========",e),0!==a.code?(D("接口请求报错，请稍后重试~"),50008===a.code||50012===a.code||a.code,a.msg||"error"):a}),(e=>(console.log("err"+e),D(e||"接口请求报错，请稍后重试~"),e)));var L=M;const z={class:"parent"},F=(0,t._)("h1",{class:"title"},"功能演示",-1),I={class:"group_btn"},B={class:"ai-contanier"},E={class:"tech-recognition-content"},G={class:"tech-img-content"},T={class:"tech-canvas-container"},J={key:0,class:"scan-div"},K=[(0,t._)("div",{class:"demo-loading"},[(0,t._)("div",{class:"demo-loading-img"}),(0,t._)("div",{class:"demo-loading-text"},"图片解析中…")],-1)],N={key:1,class:"demo-data-error-msg"},O=[(0,t._)("img",{src:"//ai-public-console.cdn.bcebos.com/portal-pc-static/1671012338403/images/demo/err.png",alt:"",class:"error-img"},null,-1),(0,t._)("div",{class:"error-text"},"图片解析错误",-1)],V={class:"image-input"},Y={class:"image-input-container"},W={key:2,class:"image-text"},Z={class:"image-local",style:{width:"116px"}},Q=(0,t._)("div",null,null,-1),X=(0,t._)("div",{class:"image-notice"}," 此处仅供功能展示，图片类型支持PNG、JPG、JPEG、BMP，大小不超过2M。该接口实际能力的图片格式及大小要求以接口文档为准 ",-1),$={class:"demo-canvas-centerlize",width:"1680",height:"1040",style:{transform:"translate(-50%, -50%) scale(0.5)"}},ee={class:"image-select"},ae=["onClick"],le=["src"],te={class:"demo-json"},se={class:"demo-collapse"},ie={class:"demo-collapse-item"},oe=[(0,t.uE)('<div class="demo-json-req"><div class="demo-json-line"> Params <div class="demo-json-text">image=&quot;图片的Base64编码&quot;</div><div class="demo-json-text">returnMode=2</div><div class="demo-json-text"> 0-渲染后的图片Base64编码字符串,1-图片中识别对象的分类和坐标（json格式）2-包含上面两种格式的输出 </div></div><div class="demo-json-line"> Post <div class="demo-json-text">接口路由</div></div><div class="demo-json-line"> Header <div class="demo-json-text"> header: Content-Type: &quot;application/x-www-form-urlencoded&quot; </div></div></div>',1)],ne={class:"demo-collapse-item"},re={class:"demo-json-res"},ce={class:"demo-json-content"},de=["innerHTML"];var ue={__name:"CalculationNodeView",setup(e){let a=(0,s.iH)(0),l=(0,s.iH)("Response"),n=(0,s.iH)([{text:"破损红棕色绝缘子目标检测",type:"normal"},{text:"火点目标检测",type:"fire"},{text:"小目标检测",type:"small"},{text:"姿势目标检测",type:"gesture"}]),r=(0,s.iH)({uploadFile:{}}),c=(0,s.iH)(!1),d=(0,s.iH)(!1),u=(0,s.iH)(""),g=(0,s.iH)(),m=(0,s.iH)(),p=(0,s.iH)(S),v=(0,s.iH)("normal"),h=(0,s.iH)(0),b=(0,s.iH)({responseParameter:{},requestParameter:{}});(0,t.bv)((()=>{let e={url:p.value[0].url};x(e,0)}));const f=()=>{d.value=!1;let e={url:u.value};x(e,-1)},w=async e=>{if(d.value=!1,c.value=!0,"normal"===v.value){const a=await function(e){return L({url:"/caculation/normal",method:"post",data:e})}({image:e.base64,returnMode:2});if(0===a.code){c.value=!1;let l="data:image/jpeg;base64,"+a.data.image;_({url:l},e.index),b.value.responseParameter=a.data.label}else d.value=!0,c.value=!1}else if("fire"===v.value){const a=await function(e){return L({url:"/caculation/fire",method:"post",data:e})}({image:e.base64,returnMode:2});if(0===a.code){c.value=!1;let l="data:image/jpeg;base64,"+a.data.image;_({url:l},e.index),b.value.responseParameter=a.data.label}else d.value=!0,c.value=!1}else if("small"===v.value){const a=await function(e){return L({url:"/caculation/small",method:"post",data:e})}({image:e.base64,returnMode:2});if(0===a.code){c.value=!1;let l="data:image/jpeg;base64,"+a.data.image;_({url:l},e.index),b.value.responseParameter=a.data.label}else d.value=!0,c.value=!1}else if("gesture"===v.value){const a=await function(e){return L({url:"/caculation/gesture",method:"post",data:e})}({image:e.base64,returnMode:2});if(0===a.code){c.value=!1;let l="data:image/jpeg;base64,"+a.data;_({url:l},e.index),b.value.responseParameter=""}else d.value=!0,c.value=!1}},j=e=>{d.value=!1,r.value.uploadFile="";const l=e.target.files[0],t=new FileReader;r.value.uploadFile=e.target.files[0];let s=e.target.files[0];l.size>2068484?alert("选择的图像文件不能超过2.0MB,请重新选择!"):(t.onload=function(e){const l=new Image,t=s;l.onload=function(){g.value=t,l.width=l.width<1680?1680:l.width,l.height=l.height<1040?1040:l.height},l.onerror=function(){},l.src=t,console.log("img.src=====",t),console.log(e.target.result,"AAAAAAAAAA"),console.log("img.width=====",l.width),console.log("img.height=====",l.height);let i=e.target.result;a.value=-1;const o=document.createElement("canvas");o.style.border="solid 1px red",o.width=l.width<1680?1680:l.width,o.height=l.height<1040?1040:l.height,console.log("canvas.width===+++",o.width),w({base64:i.replace("data:image/jpeg;base64,",""),index:a})},t.onerror=function(){},t.readAsDataURL(l),m.value=l.name)};let _=e=>{k(e.url)},k=e=>{var a=document.querySelector("canvas").getContext("2d"),l=new Image;l.src=e,l.onload=function(){a.drawImage(l,0,0,1680,1040)}},y=e=>{l.value===e?"Request"===e?l.value="Response":"Response"===e&&(l.value="Request"):l.value=e};const x=(e,l)=>{U(e.url),a.value=l},U=e=>{const a=new Image;a.setAttribute("crossOrigin","anonymous"),a.crossOrigin="anonymous",a.src=e,a.onload=()=>q(a)},q=e=>{const l=document.createElement("canvas");l.width=e.width<1680?1680:e.width,l.height=e.height<1040?1040:e.height,l.getContext("2d").drawImage(e,0,0,l.width,l.height);const t=l.toDataURL("image/jpeg");return w({base64:t.replace("data:image/jpeg;base64,",""),index:a}),t};return(e,r)=>{const g=(0,t.up)("el-button"),m=(0,t.up)("el-form-item");return(0,t.wg)(),(0,t.iD)("div",z,[F,(0,t._)("div",I,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,s.SU)(n),((e,a)=>((0,t.wg)(),(0,t.j4)(g,{style:(0,i.j5)({background:(0,s.SU)(h)===a?"#337ecc":""}),size:"large",type:"primary",onClick:l=>((e,a)=>{v.value=e.type,h.value=a,"normal"===v.value?p.value=S:"fire"===v.value?p.value=H:"small"===v.value?p.value=R:"gesture"===v.value&&(p.value=C);let l={url:p.value[0].url};x(l,0)})(e,a),key:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.text),1)])),_:2},1032,["style","onClick"])))),128))]),(0,t._)("div",B,[(0,t._)("div",E,[(0,t._)("div",G,[(0,t._)("div",T,[(0,t.kq)(" loading样式 "),(0,s.SU)(c)?((0,t.wg)(),(0,t.iD)("div",J,K)):(0,t.kq)("v-if",!0),(0,t.kq)(" 解析错误样式 "),(0,s.SU)(d)?((0,t.wg)(),(0,t.iD)("div",N,O)):(0,t.kq)("v-if",!0),(0,t.kq)(" 输入图片网址解析 "),(0,t._)("div",V,[(0,t._)("div",Y,["normal"!==(0,s.SU)(v)?(0,t.wy)(((0,t.wg)(),(0,t.iD)("input",{key:0,type:"text",id:"url",spallcheck:"false",placeholder:"请输入网络图片URL",class:"image-url","onUpdate:modelValue":r[0]||(r[0]=e=>(0,s.dq)(u)?u.value=e:u=e)},null,512)),[[o.nr,(0,s.SU)(u)]]):(0,t.kq)("v-if",!0),"normal"!==(0,s.SU)(v)?((0,t.wg)(),(0,t.iD)("button",{key:1,class:"image-button",onClick:f}," 检测 ")):(0,t.kq)("v-if",!0),"normal"!==(0,s.SU)(v)?((0,t.wg)(),(0,t.iD)("div",W,"或")):(0,t.kq)("v-if",!0),(0,t._)("label",Z,[(0,t._)("input",{type:"file",onChange:j,accept:"image/png, image/bmp, image/jpg, image/jpeg",class:"image-local-input"},null,32),(0,t.Uk)(" 本地上传 ")]),Q]),X]),(0,t.wy)((0,t._)("canvas",$,null,512),[[o.F8,!(0,s.SU)(c)]])]),(0,t._)("div",ee,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,s.SU)(p),((e,l)=>((0,t.wg)(),(0,t.iD)("div",{onClick:a=>x(e,l),class:"image-select-item",key:l},[(0,t._)("img",{class:(0,i.C_)(["image-select-item-img",l===(0,s.SU)(a)?"is-active":""]),src:e.url},null,10,le)],8,ae)))),128))])]),(0,t.kq)(" 右侧接口数据结构 "),(0,t._)("div",te,[(0,t._)("div",se,[(0,t._)("div",ie,[(0,t._)("div",{class:"demo-collapse-item-title demo-json-title",onClick:r[1]||(r[1]=e=>(0,s.SU)(y)("Request"))},[(0,t.Uk)(" Request "),(0,t._)("span",{class:(0,i.C_)(["demo-collapse-item-arrow","Request"===(0,s.SU)(l)?"is-active":""])},null,2)]),(0,t._)("div",{class:"demo-collapse-item-cnt",style:(0,i.j5)({height:"Request"===(0,s.SU)(l)?"554px":0,opacity:"Request"===(0,s.SU)(l)?1:0})},oe,4)]),(0,t._)("div",ne,[(0,t._)("div",{class:"demo-collapse-item-title demo-json-title",onClick:r[2]||(r[2]=e=>(0,s.SU)(y)("Response"))},[(0,t.Uk)(" Response "),(0,t._)("span",{class:(0,i.C_)(["demo-collapse-item-arrow","Response"===(0,s.SU)(l)?"is-active":""])},null,2)]),(0,t._)("div",{class:"demo-collapse-item-cnt",style:(0,i.j5)({height:"Response"===(0,s.SU)(l)?"554px":0,opacity:"Response"===(0,s.SU)(l)?1:0})},[(0,t._)("div",re,[(0,t._)("div",ce,[(0,t.kq)(' <el-form-item label="请求参数：" label-width="82px">\r\n                      <div\r\n                        class="logManage-textarea"\r\n                        v-html="drawerData.requestParameter"\r\n                      ></div>\r\n                    </el-form-item> '),(0,t.Wm)(m,{label:"","label-width":"70px"},{default:(0,t.w5)((()=>[(0,t._)("div",{class:"logManage-textarea",innerHTML:(0,s.SU)(b).responseParameter},null,8,de)])),_:1})])])],4)])])])])])])}}}}}]);